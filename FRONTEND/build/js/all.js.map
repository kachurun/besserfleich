{"version":3,"sources":["index.js"],"names":["lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","svg4everybody","embed","svg","target","fragment","document","createDocumentFragment","viewBox","getAttribute","setAttribute","clone","cloneNode","childNodes","appendChild","firstChild","loadreadystatechange","xhr","onreadystatechange","readyState","cachedDocument","_cachedDocument","implementation","createHTMLDocument","body","innerHTML","responseText","_cachedTarget","_embeds","splice","map","item","getElementById","rawopts","oninterval","index","uses","use","parentNode","test","nodeName","src","polyfill","opts","validate","removeChild","srcSplit","split","url","shift","join","requests","XMLHttpRequest","open","send","push","Object","newerIEUA","webkitUA","olderEdgeUA","navigator","userAgent","match","getElementsByTagName","$","BF","init","jQuery","ua","this","is_touch","is_webkit","is_firefox","is_newer_ie","is_older_ie","is_ancient_ie","is_ie","is_mobile_ie","indexOf","is_mobile","is_desktop","is_OSX","is_EDGE","parallax","events","vendor","$header","$menu","find","headerOverflow","hasClass","coverH","outerHeight","on","st","pageYOffset","toggleClass","addClass","e","is","preventDefault","closest","removeClass","currentTarget","hasError","$form","$fields","each","field","$field","data","correct","value","val","form","serialize","req","ajax","attr","type","dataType","always","get","reset","self","lightSlider","adaptiveHeight","slideMargin","loop","auto","pause","controls","pager","galleryMargin","enableDrag","lightGallery","cssEasing","preload","download","YTPlayer","animateParallax","y","start","factor","bg","style","transform","$bg","offset","top"],"mappings":"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","file":"all.js","sourcesContent":["/* jshint esnext: true, esversion: 6 */\n\n\n// requestAnimationFrame\n(function() {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame']\n                                   || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n\n/*! svg4everybody v2.0.3 | github.com/jonathantneal/svg4everybody */\n!(function(window) {\n    window.svg4everybody = (function() {\n        function embed(svg, target) {\n            // if the target exists\n            if (target) {\n                // create a document fragment to hold the contents of the target\n                var fragment = document.createDocumentFragment(),\n                    viewBox = target.getAttribute(\"viewBox\");\n                // conditionally set the viewBox on the svg\n                svg.setAttribute(\"viewBox\", viewBox);\n\n                // copy the contents of the clone into the fragment\n                for ( // clone the target\n                    var clone = target.cloneNode(!0); clone.childNodes.length;) {\n                    fragment.appendChild(clone.firstChild);\n                }\n                // append the fragment into the svg\n                svg.appendChild(fragment);\n            }\n        }\n\n        function loadreadystatechange(xhr) {\n            // listen to changes in the request\n            xhr.onreadystatechange = function() {\n                    // if the request is ready\n                    if (4 === xhr.readyState) {\n                        // get the cached html document\n                        var cachedDocument = xhr._cachedDocument;\n                        // ensure the cached html document based on the xhr response\n                        cachedDocument || (cachedDocument = xhr._cachedDocument = document.implementation.createHTMLDocument(\"\"),\n                                cachedDocument.body.innerHTML = xhr.responseText, xhr._cachedTarget = {}), // clear the xhr embeds list and embed each item\n                            xhr._embeds.splice(0).map(function(item) {\n                                // get the cached target\n                                var target = xhr._cachedTarget[item.id];\n                                // ensure the cached target\n                                target || (target = xhr._cachedTarget[item.id] = cachedDocument.getElementById(item.id)),\n                                    // embed the target into the svg\n                                    embed(item.svg, target);\n                            });\n                    }\n                }, // test the ready state change immediately\n                xhr.onreadystatechange();\n        }\n\n        function svg4everybody(rawopts) {\n            function oninterval() {\n                // while the index exists in the live <use> collection\n                for ( // get the cached <use> index\n                    var index = 0; index < uses.length;) {\n                    // get the current <use>\n                    var use = uses[index],\n                        svg = use.parentNode;\n                    if (svg && /svg/i.test(svg.nodeName)) {\n                        var src = use.getAttribute(\"xlink:href\");\n                        if (polyfill && (!opts.validate || opts.validate(src, svg, use))) {\n                            // remove the <use> element\n                            svg.removeChild(use);\n                            // parse the src and get the url and id\n                            var srcSplit = src.split(\"#\"),\n                                url = srcSplit.shift(),\n                                id = srcSplit.join(\"#\");\n                            // if the link is external\n                            if (url.length) {\n                                // get the cached xhr request\n                                var xhr = requests[url];\n                                // ensure the xhr request exists\n                                xhr || (xhr = requests[url] = new XMLHttpRequest(), xhr.open(\"GET\", url), xhr.send(),\n                                        xhr._embeds = []), // add the svg and id as an item to the xhr embeds list\n                                    xhr._embeds.push({\n                                        svg: svg,\n                                        id: id\n                                    }), // prepare the xhr ready state change event\n                                    loadreadystatechange(xhr);\n                            } else {\n                                // embed the local id into the svg\n                                embed(svg, document.getElementById(id));\n                            }\n                        }\n                    } else {\n                        // increase the index when the previous value was not \"valid\"\n                        ++index;\n                    }\n                }\n                // continue the interval\n                requestAnimationFrame(oninterval, 67);\n            }\n            var polyfill, opts = Object(rawopts),\n                newerIEUA = /\\bTrident\\/[567]\\b|\\bMSIE (?:9|10)\\.0\\b/,\n                webkitUA = /\\bAppleWebKit\\/(\\d+)\\b/,\n                olderEdgeUA = /\\bEdge\\/(\\d+)\\.(\\d+)\\b/;\n            polyfill = \"polyfill\" in opts ? opts.polyfill : newerIEUA.test(navigator.userAgent) || olderEdgeUA.test(navigator.userAgent) || (navigator.userAgent.match(webkitUA) || [])[1] < 537;\n            // create xhr requests object\n            var requests = {},\n                requestAnimationFrame = window.requestAnimationFrame || setTimeout,\n                uses = document.getElementsByTagName(\"use\");\n            // conditionally start the interval if the polyfill is active\n            polyfill && oninterval();\n        }\n        return svg4everybody;\n    })();\n})(window);\n\n///\n\n!(function(window, $) {\n    $(function() {\n        BF.init();\n    });\n})(window, jQuery);\n\nwindow.BF = {\n    init: function() {\n        var ua = navigator.userAgent;\n        this.is_touch = 'ontouchstart' in window; // это тач устройство?\n        this.is_webkit       = ua.match(/webkit/i);\n        this.is_firefox      = ua.match(/gecko/i);\n        this.is_newer_ie     = ua.match(/msie (9|([1-9][0-9]))/i);\n        this.is_older_ie     = ua.match(/msie/i) && !this.is_newer_ie;\n        this.is_ancient_ie   = ua.match(/msie 6/i);\n        this.is_ie           = this.is_ancient_ie || this.is_older_ie || this.is_newer_ie;\n        this.is_mobile_ie    = ua.indexOf('IEMobile') !== -1;\n        this.is_mobile       = ua.match(/mobile/i);\n        this.is_desktop       = !this.is_mobile;\n        this.is_OSX          = ua.match(/(iPad|iPhone|iPod|Macintosh)/g) ? true : false;\n        this.is_EDGE \t\t= /Edge\\/12./i.test(ua);\n\n        if (this.is_desktop) {\n            this.parallax();\n        }\n\n        this.events();\n        this.vendor();\n    },\n\n    events: function() {\n        var self = this;\n\n        // Scroll\n        var $header = $('.b_header');\n        var $menu = $header.find('.menu-holder');\n\n        var headerOverflow = $header.hasClass('overflow');\n\n        if ( headerOverflow ) {\n            var coverH = $('.b_cover').outerHeight() || 0;\n            $(window).on('scroll', function() {\n                var st = window.pageYOffset;\n                $header.toggleClass('floating', (st >= Math.max(coverH - 300, 0)));\n                $header.toggleClass('animate', (st >= Math.max((coverH - 200), 0)));\n                $header.toggleClass('show', (st >= Math.max(coverH, 0)));\n            });\n        } else {\n            $header.addClass('floating show');\n        }\n\n        // burger\n        $('body').on('click touchstart', function(e) {\n            if ($(e.target).is('.burger')) {\n                e.preventDefault();\n                $menu.toggleClass('show');\n            }\n            else if ($(e.target).closest('.b_header').length === 0) {\n                $menu.removeClass('show');\n            }\n        });\n\n        // gallery\n        $('.b_gallery').find('.gallery-wrap').on('click', '.show-more', function(e){\n            e.preventDefault();\n\n            $(e.currentTarget).closest('.gallery-wrap').toggleClass('extend');\n        });\n\n        $('form').on('submit', function(e) {\n            e.preventDefault();\n\n            var hasError = false;\n            var $form = $(e.currentTarget);\n            var $fields = $form.find('.form-field');\n            $fields.removeClass('error');\n\n            $fields.each(function(index, field) {\n                var $field = $(field);\n                var validate = $(field).data('validate');\n                var correct = false;\n                var value = $field.find('input, textarea').val();\n\n                if (validate) {\n                    switch (validate) {\n                        case 'email':\n                            correct = value.match(/.+@.+\\..+/i);\n                            break;\n                        default:\n                            correct = value.length > 0;\n                    }\n                }\n                else {\n                    correct = true;\n                }\n\n                if ( !correct ) {\n                    $field.addClass('error');\n                    hasError = true;\n                    return false;\n                }\n            });\n\n            if (hasError) {\n                return;\n            }\n\n            var form = $form.serialize();\n\n            // AJAX\n            var req = $.ajax(\n            {\n                url: $form.attr('action'),\n                type: 'GET',\n                dataType: 'json',\n                data: form+'&is_ajax=true'\n            });\n\n            req.always(function(data)\n            {\n                $form.get(0).reset();\n                $form.addClass('sended');\n            });\n        });\n    },\n\n    vendor: function() {\n        var self = this;\n\n        svg4everybody();\n\n        $('.slider').lightSlider({\n            adaptiveHeight: true,\n            item: 1,\n            slideMargin: 0,\n            loop: true,\n            auto: true,\n            pause: 10000,\n            controls: false,\n            pager: true,\n            galleryMargin: 0,\n            enableDrag: false\n        });\n\n        $('.lg-init').lightGallery({\n            cssEasing : 'cubic-bezier(0.25, 0, 0.25, 1)',\n            preload: 4,\n            download: false,\n        });\n\n        if (self.is_desktop) {\n            $('#video-bg').YTPlayer();\n        }\n    },\n\n    parallax: function() {\n        var $bg = $('.bg[data-parallax=\"true\"]');\n        var bg = $bg[0];\n\n        if (!bg) return;\n        var start = $bg.offset().top;\n        var factor = 0.3;\n\n        (function loop() {\n            animateParallax();\n            requestAnimationFrame(loop);\n        })();\n\n        function animateParallax() {\n            var y = (window.pageYOffset - start) * factor;\n            bg.style.transform = \"translate3d(0,\" + y + \"px,0)\";\n        }\n    }\n}\n"],"sourceRoot":"/source/"}